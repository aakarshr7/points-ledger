<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Points Transaction Log</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f6f7fb;
      padding: 20px;
      max-width: 700px;
      margin: auto;
    }
    h1, h3 {
      text-align: center;
    }
    .scoreboard {
      display: flex;
      justify-content: space-around;
      margin: 20px 0;
    }
    .card {
      background: white;
      padding: 15px;
      border-radius: 12px;
      width: 45%;
      text-align: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    .points {
      font-size: 2rem;
      font-weight: bold;
    }
    .controls {
      background: white;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      margin-bottom: 20px;
    }
    input, select, button {
      padding: 8px;
      margin: 6px 0;
      width: 100%;
    }
    button {
      cursor: pointer;
      border-radius: 8px;
      border: none;
      background: #4f46e5;
      color: white;
      font-size: 1rem;
    }
    button.redeem {
      background: #16a34a;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: white;
      margin-bottom: 8px;
      padding: 10px;
      border-radius: 8px;
      font-size: 0.9rem;
    }
    .footer {
      text-align: center;
      font-size: 0.8rem;
      color: #666;
      margin-top: 20px;
    }
  </style>
</head>
<body>

<h1>üèÜ Points Transaction Log</h1>

<div class="scoreboard">
  <div class="card">
    <h3>You</h3>
    <div class="points" id="youPoints">0</div>
  </div>
  <div class="card">
    <h3>Her</h3>
    <div class="points" id="herPoints">0</div>
  </div>
</div>

<div class="controls">
  <h3>‚ûï Add / Deduct Points</h3>

  <select id="receiver">
    <option value="you">You</option>
    <option value="her">Her</option>
  </select>

  <input type="number" id="points" placeholder="e.g. 5000 (negative to deduct)" />
  <input type="text" id="reason" placeholder="Reason" />

  <button onclick="addTransaction()">Log Transaction</button>
</div>

<div class="controls">
  <h3>üéÅ Redeem Points</h3>

  <select id="redeemPerson">
    <option value="you">You</option>
    <option value="her">Her</option>
  </select>

  <input type="number" id="redeemPoints" placeholder="Points to redeem" />
  <input type="text" id="redeemFor" placeholder="Redeemed for (coffee, favor, etc.)" />

  <button class="redeem" onclick="redeemPoints()">Redeem</button>
</div>

<h3>üìú Transaction History</h3>
<ul id="log"></ul>

<div class="footer">
  Points have no cash value. Terms subject to vibes & mood üòÑ
</div>

<script>
  const data = JSON.parse(localStorage.getItem("pointsData")) || {
    you: 0,
    her: 0,
    log: []
  };

  function render() {
    document.getElementById("youPoints").textContent = data.you;
    document.getElementById("herPoints").textContent = data.her;

    const logEl = document.getElementById("log");
    logEl.innerHTML = "";

    data.log.forEach(entry => {
      const li = document.createElement("li");
      li.textContent = `${entry.date} ‚Äî ${entry.text}`;
      logEl.appendChild(li);
    });
  }

  function addTransaction() {
    const receiver = document.getElementById("receiver").value;
    const points = parseInt(document.getElementById("points").value, 10);
    const reason = document.getElementById("reason").value || "No reason";

    if (isNaN(points)) return alert("Enter valid points");

    data[receiver] += points;
    data.log.unshift({
      date: new Date().toLocaleString(),
      text: `${receiver.toUpperCase()} ${points > 0 ? "+" : ""}${points} pts (${reason})`
    });

    saveAndRender();
  }

  function redeemPoints() {
    const person = document.getElementById("redeemPerson").value;
    const points = parseInt(document.getElementById("redeemPoints").value, 10);
    const item = document.getElementById("redeemFor").value || "Something mysterious";

    if (isNaN(points) || points <= 0) {
      return alert("Enter valid redeem points");
    }

    if (data[person] < points) {
      return alert("Not enough points üò¨");
    }

    data[person] -= points;
    data.log.unshift({
      date: new Date().toLocaleString(),
      text: `${person.toUpperCase()} redeemed ${points} pts for ${item}`
    });

    saveAndRender();
  }

  function saveAndRender() {
    localStorage.setItem("pointsData", JSON.stringify(data));
    render();
  }

  render();
</script>

</body>
</html>
